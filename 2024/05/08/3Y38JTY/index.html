<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JS基础补充 | DeitySpark</title><meta name="author" content="Deity."><meta name="copyright" content="Deity."><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="一、基础JS 操作事件流 改变 HTML 图像  本例会动态地改变 HTML  的来源（src）：  1234567891011121314<script>// 使用 三目运算符function changeImage(){    var s = document.getElementById('myimage');    s.src = s.src.ma">
<meta property="og:type" content="article">
<meta property="og:title" content="JS基础补充">
<meta property="og:url" content="https://www.blog.deityspark.fun/2024/05/08/3Y38JTY/index.html">
<meta property="og:site_name" content="DeitySpark">
<meta property="og:description" content="一、基础JS 操作事件流 改变 HTML 图像  本例会动态地改变 HTML  的来源（src）：  1234567891011121314<script>// 使用 三目运算符function changeImage(){    var s = document.getElementById('myimage');    s.src = s.src.ma">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picsum.photos/330/235">
<meta property="article:published_time" content="2024-05-07T16:00:00.000Z">
<meta property="article:modified_time" content="2024-02-24T15:39:55.771Z">
<meta property="article:author" content="Deity.">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picsum.photos/330/235"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.blog.deityspark.fun/2024/05/08/3Y38JTY/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JS基础补充',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-24 23:39:55'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css');loadCss('https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css');loadCss('https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css');loadCss('https://fonts.googleapis.com/css?family=Titillium+Web&display=swap');loadCss('https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"></noscript></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-sitemap"></i><span> 关于</span></a></li><li><a class="site-page child" href="/myself/"><i class="fa-fw fas fa-id-card"></i><span> myself</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly/"><i class="fa-fw fas fa-heart"></i><span> butterfly主题</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://picsum.photos/330/235')"><nav id="nav"><span id="blog-info"><a href="/" title="DeitySpark"><img class="site-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png"><span class="site-name">DeitySpark</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-sitemap"></i><span> 关于</span></a></li><li><a class="site-page child" href="/myself/"><i class="fa-fw fas fa-id-card"></i><span> myself</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly/"><i class="fa-fw fas fa-heart"></i><span> butterfly主题</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JS基础补充</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-07T16:00:00.000Z" title="发表于 2024-05-08 00:00:00">2024-05-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-24T15:39:55.771Z" title="更新于 2024-02-24 23:39:55">2024-02-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>47分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JS基础补充"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="background-image: url('https://picsum.photos/330/235')"></div></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="一、基础"><a href="#一、基础" class="headerlink" title="一、基础"></a>一、基础</h3><h4 id="JS-操作事件流"><a href="#JS-操作事件流" class="headerlink" title="JS 操作事件流"></a>JS 操作事件流</h4><ol>
<li><p><strong>改变 HTML 图像</strong></p>
<p> 本例会动态地改变 HTML <img> 的来源（src）：</p>
 <figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用 三目运算符</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeImage</span>(<span class="params"></span>){</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'myimage'</span>);</span></span><br><span class="line"><span class="language-javascript">    s.<span class="property">src</span> = s.<span class="property">src</span>.<span class="title function_">match</span>(<span class="string">'bulboff'</span>) ? <span class="string">"/images/pic_bulbon.gif"</span> : <span class="string">"/images/pic_bulboff.gif"</span>;</span></span><br><span class="line"><span class="language-javascript">}</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用事件流获取标签</span></span></span><br><span class="line"><span class="language-javascript">&lt;img id=<span class="string">"myimage"</span> onclick=<span class="string">"~function(e){e.src=e.src.match('bulboff')?'/images/pic_bulbon.gif':'/images/pic_bulboff.gif'}(this)"</span> src=<span class="string">"/images/pic_bulboff.gif"</span> width=<span class="string">"100"</span> height=<span class="string">"180"</span>&gt;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"myimage"</span> <span class="attr">onclick</span>=<span class="string">"changeImage()"</span> <span class="attr">src</span>=<span class="string">"/images/pic_bulboff.gif"</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>点击灯泡就可以打开或关闭这盏灯<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p> 在这段代码中，<code>~function(e){...}(this)</code> 表示使用了一个<strong>自执行的匿名函数</strong>。这个匿名函数接收一个参数<code> e</code>，表示当前被点击的图片元素，然后对这个元素的 <code>src</code> 属性进行修改，实现灯泡的打开和关闭。</p>
<p>   需要注意的是，<code>~function(e){...}(this)</code> 中的波浪线 <code>~</code> 并不是必须的，它的作用是将匿名函数转换为一个表达式，从而避免将 <strong>function</strong> 关键字视为一个语句而出现语法错误。因此，这个波浪线可以省略，代码也可以写成 <code>(function(e){...})(this)</code> 的形式，效果是一样的。</p>
</li>
</ol>
<hr>
<h4 id="JS输入输出"><a href="#JS输入输出" class="headerlink" title="JS输入输出"></a>JS输入输出</h4><ol>
<li><p>DOM 文件流</p>
<p><strong>DOM (Document Object Model)（文档对象模型）</strong>是用于访问 HTML 元素的正式 W3C 标准。</p>
<p>格式 <code>&lt;script&gt;</code></p>
<p>那些老旧的实例可能会在 <code>&lt;script&gt;</code> 标签中使用 <code>type="text/javascript</code>。</p>
<p>现在已经不必这样做了。</p>
<p><strong>脚本位置</strong></p>
<p>在 <code>&lt;head&gt;</code> 或者 <code>&lt;body&gt;</code> 的JavaScript</p>
<p>外部脚本不能包含 <code>&lt;script&gt;</code> 标签。</p>
<p><strong>输出数据</strong></p>
<p>window.alert() 弹出警告框。</p>
<p>document.write() 方法将内容写到 HTML 文档中。</p>
<p>innerHTML 写入到 HTML 元素。</p>
<p>console.log() 写入到浏览器的控制台。</p>
<p><strong>输出内容</strong></p>
<p>使用 document.write() 向文档输出写内容。</p>
<p>==如果在文档已完成加载后执行 document.write，整个 HTML 页面将被覆盖==</p>
<p><strong>写到控制台(调试模式)</strong></p>
<p>使用 <code>console.log()</code> 方法在浏览器中显示 JavaScript 值。</p>
<p>F12 启用调试模式， 在调试窗口中点击 <code>"Console"</code> 菜单</p>
</li>
<li><p><code>console.log()</code> 用法也可以像 C 语言用 <strong>%s</strong> 来使用变量：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hello = <span class="string">'hello'</span>;</span><br><span class="line"><span class="keyword">var</span> one = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'%s world'</span>, hello)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'%d + 1 = 3'</span>, one)</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="JS-语法"><a href="#JS-语法" class="headerlink" title="JS 语法"></a>JS 语法</h4></li>
<li><p>javascript字面量：在编程语言中，一般固定值称为字面量</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Number 通过数字字面量赋值 </span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// Number 通过表达式字面量赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String 通过字符串字面量赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Array  通过数组字面量赋值 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object 通过对象字面量赋值</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="JS变量"><a href="#JS变量" class="headerlink" title="JS变量"></a>JS变量</h4></li>
<li><p><strong>JavaScript 允许重复声明变量，后声明的覆盖之前的</strong></p>
<p>JavaScript 允许变量被重复声明，在声明变量时 JavaScript 会自行判断这个变量是否已经被声明了，如果已经被声明（即已经存在），那么重复声明（即除了变量的非首次声明）会被跳过，不再执行声明的操作。</p>
<p>JavaScript 变量的值是可以被重复赋值的，最后的赋值是这个变量最后的结果。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"test"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="title function_">test1</span>();     <span class="comment">//输出test</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"test"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="title function_">test</span>();     <span class="comment">//输出 "test arg 0 + undefined"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">arg1</span>) {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"test arg "</span> + <span class="variable language_">arguments</span>.<span class="property">length</span> + <span class="string">" + "</span> + arg1);</span><br><span class="line">}</span><br><span class="line"><span class="title function_">test</span>(<span class="number">1</span>, <span class="number">2</span>);  <span class="comment">//输出 "test arg 2 + 1"</span></span><br></pre></td></tr></tbody></table></figure>

<p>实参个数如果比形参少，那么剩下的默认赋值为 <strong>undefined</strong>，如果实参传的比形参数量多，那么是全部都会被传进去的，只不过没有对应的形参可以引用（但可以用 arguments 来获取剩下的参数）。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">arg1</span>) {</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="variable language_">arguments</span>.<span class="property">length</span>; i++) {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[i]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="title function_">test</span>(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">//输出 1 2</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>变量与函数重名的时候，变量生效</strong></p>
<p>这涉及到了变量和函数的预解析：</p>
<ul>
<li>变量声明会被顶置，函数声明也会被顶置且比变量更先声明。</li>
<li>变量的声明和赋值语句一起写时，JS引擎在解析时，会将其拆成声明和赋值2部分，声明置顶，赋值保留在原来位置。</li>
<li>声明过的变量不会再重复声明。</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"function"</span>;</span><br><span class="line">}</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);     <span class="comment">//输出 100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>());   <span class="comment">//报错Uncaught TypeError: a is not a function</span></span><br></pre></td></tr></tbody></table></figure>

<p>JS 中有两种函数，一种是普通函数，一种是函数对象。下面的这种就是“函数对象”，它实际上是声明一个匿名函数，然后将该函数的<strong>init</strong>方法赋值给该变量。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">function</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"function"</span>;</span><br><span class="line">}</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);  <span class="comment">//输出[Function: a]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>());   <span class="comment">//输出 "function"</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>函数与内部变量重名</strong></p>
<p>定义普通函数，即在 window 变量下，定义一个 key，它的名字为该函数名，值为该函数的地址。函数内部的 this 指向 window 对象。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);  <span class="comment">//输出 window{...}</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">1</span>;         <span class="comment">//即 window.a = 1，此时window下的function a已经被该变量覆盖了。</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">5</span>;          <span class="comment">//下面的这几个变量都是局部变量，仅在花括号范围内有效。  </span></span><br><span class="line">    a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">var</span> v = <span class="string">"value"</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"function"</span>;</span><br><span class="line">}</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);         <span class="comment">//输出 function a {...}</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>());       <span class="comment">//输出 "function"</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);         <span class="comment">//输出 1, 此时window下的function a已经被改变了。</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出</span></span><br><span class="line"><span class="comment">Uncaught ReferenceError: v is not defined</span></span><br><span class="line"><span class="comment">    (anonymous function) @ mycolor.html:15</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<hr>
<h4 id="JS-数据类型"><a href="#JS-数据类型" class="headerlink" title="JS 数据类型"></a>JS 数据类型</h4><table>
<thead>
<tr>
<th></th>
<th align="center">JavaScript 变量均为对象。当您声明一个变量时，就创建了一个新的对象。</th>
</tr>
</thead>
</table>
<ol>
<li><p>undefined 和 Null</p>
<p>在 JavaScript 中, null 用于对象, undefined 用于变量，属性和方法。</p>
<p>对象只有被定义才有可能为 null，否则为 undefined。</p>
<p>如果我们想测试对象是否存在，在对象还没定义时将会抛出一个错误。</p>
<p>错误的使用方式：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (myObj !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> myObj !== <span class="string">"undefined"</span>) </span><br></pre></td></tr></tbody></table></figure>

<p>正确的方式是我们需要先使用 typeof 来检测对象是否已定义：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> myObj !== <span class="string">"undefined"</span> &amp;&amp; myObj !== <span class="literal">null</span>) </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>声明变量类型</p>
<p>当您声明新变量时，可以使用关键词 “new” 来声明其类型：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> carname=<span class="keyword">new</span> <span class="title class_">String</span>;</span><br><span class="line"><span class="keyword">var</span> x=   <span class="keyword">new</span> <span class="title class_">Number</span>;</span><br><span class="line"><span class="keyword">var</span> y=   <span class="keyword">new</span> <span class="title class_">Boolean</span>;</span><br><span class="line"><span class="keyword">var</span> cars=  <span class="keyword">new</span> <span class="title class_">Array</span>;</span><br><span class="line"><span class="keyword">var</span> person= <span class="keyword">new</span> <span class="title class_">Object</span>;</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>对象属性有两种寻址方式：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> name=person.<span class="property">lastname</span>;</span><br><span class="line">   name=person[<span class="string">"lastname"</span>];</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<p>javaScript对象中属性具有唯一性（这里的属性包括方法），如果有两个重复的属性，则以最后赋值为准。比如同时存在两个play:</p>
<ol start="4">
<li><p>在定义后可以通过 <strong>typeof()</strong> 来获取JavaScript中变量的数据类型.</p>
  <figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">typeof</span>(<span class="string">'hello'</span>)  <span class="comment">// string</span></span><br><span class="line">a = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// object</span></span><br><span class="line">a = <span class="number">666</span>;</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// number </span></span><br><span class="line">a = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// symbol</span></span><br><span class="line">     </span><br><span class="line">a = <span class="keyword">function</span>(<span class="params"></span>){}</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// function</span></span><br><span class="line">     </span><br><span class="line">a = [];</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// object</span></span><br><span class="line">a = {};</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// object</span></span><br><span class="line">a = <span class="regexp">/aaa/g</span>;</span><br><span class="line"><span class="keyword">typeof</span> a;    <span class="comment">// object   </span></span><br></pre></td></tr></tbody></table></figure>

<p>   ==<strong>注：</strong>typeof 不能用来判断是 <strong>Array</strong> 还是 <strong>Object</strong>==</p>
<p>   使用以下方法判断：</p>
<ol>
<li>使用 isArray 方法</li>
</ol>
   <figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cars=<span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">cars[<span class="number">0</span>]=<span class="string">"Saab"</span>;</span><br><span class="line">cars[<span class="number">1</span>]=<span class="string">"Volvo"</span>;</span><br><span class="line">cars[<span class="number">2</span>]=<span class="string">"BMW"</span>;</span><br><span class="line"><span class="comment">// 判断是否支持该方法</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="property">isArray</span>) {</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(cars)) {</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">"该对象是一个数组。"</span>) ;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>使用 instanceof 操作符</li>
</ol>
<p>   <a target="_blank" rel="noopener external nofollow noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof">instanceof</a>：==用来判断某个构造函数的 prototype 属性所指向的对象是否存在于另外一个要检测对象的原型链上==,简单说就是判断一个引用类型的变量具体是不是某种类型的对象</p>
   <figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cars=<span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">cars[<span class="number">0</span>]=<span class="string">"Saab"</span>;</span><br><span class="line">cars[<span class="number">1</span>]=<span class="string">"Volvo"</span>;</span><br><span class="line">cars[<span class="number">2</span>]=<span class="string">"BMW"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cars <span class="keyword">instanceof</span> <span class="title class_">Array</span>) {</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">"该对象是一个数组。"</span>) ;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>数据类型转换</p>
<ol>
<li>利用 toString() 方法可以把数值转换为字符串。</li>
<li>使用 parseInt() 和 parseFloat() 方法可以把字符串转换为数值。</li>
<li>要把任何值转换为布尔型数据，在值的前面增加两个 <strong>!!</strong> 感叹号即可，**!!0** 为 <strong>False</strong>，其余的均为 <strong>True</strong>。</li>
</ol>
</li>
<li><p><strong>基本类型</strong></p>
<p>JavaScript 中共有 6 种基本数据类型：Undefined、Null、Boolean、Number、String、Symbol (new in ES 6) ！</p>
<p><strong>约定：</strong>基本数据类型与原始数据类型等意。</p>
<p>==基本数据类型的值是按值访问的。==</p>
<ul>
<li><p>基本类型的值是不可变的</p>
 <figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"123hello321"</span>;</span><br><span class="line">str.<span class="title function_">toUpperCase</span>();     <span class="comment">// 123HELLO321</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);      <span class="comment">// 123hello321</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>基本类型的比较是它们的值的比较</p>
 <figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a == b);    <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === b);   <span class="comment">// false</span></span><br></pre></td></tr></tbody></table></figure>

<p> 上面 a 和 b 的数据类型不同，但是也可以进行值的比较，这是因为在比较之前，自动进行了数据类型的 隐式转换。</p>
<ul>
<li>== : 只进行值的比较</li>
<li>=== : 不仅进行值得比较，还要进行数据类型的比较</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>引用类型</strong></p>
<p>  除过上面的 6 种基本数据类型外，剩下的就是引用类型了，统称为 Object 类型。细分的话，有：Object 类型、Array 类型、Date 类型、RegExp 类型、Function 类型 等。</p>
<p>  <strong>引用类型的值是按引用访问的。</strong></p>
<ul>
<li><p>引用类型的值是可变的</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = {<span class="attr">name</span>:<span class="string">"zyj"</span>};   <span class="comment">// 创建一个对象</span></span><br><span class="line">obj.<span class="property">name</span> = <span class="string">"percy"</span>;       <span class="comment">// 改变 name 属性的值</span></span><br><span class="line">obj.<span class="property">age</span> = <span class="number">21</span>;             <span class="comment">// 添加 age 属性</span></span><br><span class="line">obj.<span class="property">giveMeAll</span> = <span class="keyword">function</span>(<span class="params"></span>){</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">" : "</span> + <span class="variable language_">this</span>.<span class="property">age</span>;</span><br><span class="line">};                        <span class="comment">// 添加 giveMeAll 方法</span></span><br><span class="line">obj.<span class="title function_">giveMeAll</span>();</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>引用类型的比较是引用的比较</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = {};    <span class="comment">// 新建一个空对象 obj1</span></span><br><span class="line"><span class="keyword">var</span> obj2 = {};    <span class="comment">// 新建一个空对象 obj2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 == obj2);    <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 === obj2);   <span class="comment">// false</span></span><br></pre></td></tr></tbody></table></figure>

<p>因为 obj1 和 obj2 分别引用的是存放在<strong>堆内存</strong>中的2个不同的对象，故变量 obj1 和 obj2 的值（引用地址）也是不一样的！</p>
</li>
</ul>
<hr>
</li>
</ol>
<h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h4><p><strong>变量作用域</strong></p>
<p>变量在函数内声明，变量为局部变量，具有==局部作用域==。因为局部变量只作用于函数内，所以不同的函数可以使用相同名称的变量。局部变量在函数开始执行时创建，函数执行完后局部变量会自动销毁。</p>
<p>变量在函数外定义，即为全局变量。全局变量有==全局作用域==: 网页中所有脚本和函数均可使用。<strong>如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量。</strong>全局变量在页面关闭后销毁。</p>
<hr>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><ol>
<li><p><strong>字符串可以是对象</strong></p>
<p>通常， JavaScript 字符串是原始值，可以使用字符创建： **var firstName = “John”**但我们也可以使用 new 关键字将字符串定义为一个对象： <strong>var firstName = new String(“John”)</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="string">"John"</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">"John"</span>);</span><br><span class="line"><span class="keyword">typeof</span> x <span class="comment">// 返回 String</span></span><br><span class="line"><span class="keyword">typeof</span> y <span class="comment">// 返回 Object</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="string">"John"</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">"John"</span>);</span><br><span class="line">(x === y) <span class="comment">// 结果为 false，因为 x 是字符串，y 是对象</span></span><br></pre></td></tr></tbody></table></figure>

<p> |  | 不要创建 String 对象。它会拖慢执行速度，并可能产生其他副作用： |</p>
</li>
</ol>
<p>| ————————– | ———————————————————— |</p>
<ol start="2">
<li><p><strong>字符串属性</strong></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">==constructor==</td>
<td align="left">返回创建字符串属性的函数</td>
</tr>
<tr>
<td align="left">length</td>
<td align="left">返回字符串的长度</td>
</tr>
<tr>
<td align="left">==prototype==</td>
<td align="left">允许您向对象添加属性和方法</td>
</tr>
</tbody></table>
<hr>
</li>
<li><p><strong>字符串方法</strong></p>
<p> 更多方法实例可以参见：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/jsref/jsref-obj-string.html">JavaScript String 对象</a>。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">charAt()</td>
<td align="left">返回指定索引位置的字符</td>
</tr>
<tr>
<td align="left">charCodeAt()</td>
<td align="left">返回指定索引位置字符的 Unicode 值</td>
</tr>
<tr>
<td align="left">concat()</td>
<td align="left">连接两个或多个字符串，返回连接后的字符串</td>
</tr>
<tr>
<td align="left">fromCharCode()</td>
<td align="left">将 Unicode 转换为字符串</td>
</tr>
<tr>
<td align="left">indexOf()</td>
<td align="left">返回字符串中检索指定字符第一次出现的位置</td>
</tr>
<tr>
<td align="left">lastIndexOf()</td>
<td align="left">返回字符串中检索指定字符最后一次出现的位置</td>
</tr>
<tr>
<td align="left">==localeCompare()==</td>
<td align="left">用本地特定的顺序来比较两个字符串</td>
</tr>
<tr>
<td align="left">==match()==</td>
<td align="left">找到一个或多个正则表达式的匹配</td>
</tr>
<tr>
<td align="left">==replace()==</td>
<td align="left">替换与正则表达式匹配的子串</td>
</tr>
<tr>
<td align="left">==search()==</td>
<td align="left">检索与正则表达式相匹配的值</td>
</tr>
<tr>
<td align="left">slice()</td>
<td align="left">提取字符串的片断，并在新的字符串中返回被提取的部分</td>
</tr>
<tr>
<td align="left">split()</td>
<td align="left">把字符串分割为子字符串数组</td>
</tr>
<tr>
<td align="left">==substr()==</td>
<td align="left">从起始索引号提取字符串中指定数目的字符</td>
</tr>
<tr>
<td align="left">substring()</td>
<td align="left">提取字符串中两个指定的索引号之间的字符</td>
</tr>
<tr>
<td align="left">toLocaleLowerCase()</td>
<td align="left">根据主机的语言环境把字符串转换为小写，只有几种语言（如土耳其语）具有地方特有的大小写映射</td>
</tr>
<tr>
<td align="left">toLocaleUpperCase()</td>
<td align="left">根据主机的语言环境把字符串转换为大写，只有几种语言（如土耳其语）具有地方特有的大小写映射</td>
</tr>
<tr>
<td align="left">toLowerCase()</td>
<td align="left">把字符串转换为小写</td>
</tr>
<tr>
<td align="left">toString()</td>
<td align="left">返回字符串对象值</td>
</tr>
<tr>
<td align="left">toUpperCase()</td>
<td align="left">把字符串转换为大写</td>
</tr>
<tr>
<td align="left">trim()</td>
<td align="left">移除字符串首尾空白</td>
</tr>
<tr>
<td align="left">valueOf()</td>
<td align="left">返回某个字符串对象的原始值</td>
</tr>
</tbody></table>
</li>
<li><p>JavaScript == 与 === 区别</p>
<ol>
<li>对于 string、number 等基础类型，== 和 === 是有区别</li>
</ol>
<ul>
<li><p>a) 不同类型间比较，== 之比较 “转化成同一类型后的值” 看 “值” 是否相等，=== 如果类型不同，其结果就是不等。</p>
</li>
<li><p>b）同类型比较，直接进行 “值” 比较，两者结果一样。</p>
</li>
</ul>
<ol start="2">
<li><p>对于 Array,Object 等高级类型，== 和 === 是没有区别的————进行 “指针地址” 比较</p>
</li>
<li><p>基础类型与高级类型，== 和 === 是有区别的</p>
<ol>
<li>a）对于 ==，将高级转化为基础类型，进行 “值” 比较</li>
<li>b）因为类型不同，=== 结果为 false</li>
</ol>
</li>
<li><p>!= 为 == 的非运算，!== 为 === 的非运算</p>
</li>
</ol>
</li>
<li><p>模版字符串</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`string text`</span></span><br><span class="line"></span><br><span class="line"><span class="string">`string text line 1</span></span><br><span class="line"><span class="string"> string text line 2`</span></span><br><span class="line"></span><br><span class="line"><span class="string">`string text <span class="subst">${expression}</span> string text`</span></span><br><span class="line"></span><br><span class="line">tagFunction<span class="string">`string text <span class="subst">${expression}</span> string text`</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><strong>string text</strong>：将成为模板字面量的一部分的字符串文本。几乎允许所有字符，包括换行符和其他空白字符。但是，除非使用了标签函数，否则无效的转义序列将导致语法错误。</li>
<li><strong>expression</strong>：要插入当前位置的表达式，其值被转换为字符串或传递给 tagFunction。</li>
<li><strong>tagFunction</strong>：如果指定，将使用模板字符串数组和替换表达式调用它，返回值将成为模板字面量的值。</li>
</ul>
<p><strong>实例</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">'Runoob'</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">const</span> message = <span class="string">`My name is <span class="subst">${name}</span> and I'm <span class="subst">${age}</span> years old.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> price = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">VAT</span> = <span class="number">0.25</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> total = <span class="string">`Total: <span class="subst">${(price * (<span class="number">1</span> + VAT)).toFixed(<span class="number">2</span>)}</span>`</span>;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">'John'</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">31</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>){</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str =<span class="string">`</span></span><br><span class="line"><span class="string">Name:<span class="subst">${name}</span></span></span><br><span class="line"><span class="string">age:<span class="subst">${age}</span></span></span><br><span class="line"><span class="string">function:<span class="subst">${hello()}</span></span></span><br><span class="line"><span class="string">sanmu: <span class="subst">${age &gt;</span></span></span><br><span class="line"><span class="subst"><span class="string"><span class="number">30</span> ? <span class="string">'over 30'</span>: <span class="string">'under 30'</span> }</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><p><strong>对字符串和数字进行加法运算</strong></p>
<ol>
<li><p>两个数字相加，返回数字相加的和，如果数字与字符串相加，返回字符串，如下实例：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">5</span>+<span class="number">5</span>; <span class="comment">// 10</span></span><br><span class="line">y=<span class="string">"5"</span>+<span class="number">5</span>; <span class="comment">//55</span></span><br><span class="line">z=<span class="string">"Hello"</span>+<span class="number">5</span>; <span class="comment">// Hello5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result1=<span class="number">5</span>+<span class="number">5</span>+<span class="string">"abc"</span>; <span class="comment">//结果将是"10abc"</span></span><br><span class="line"><span class="keyword">var</span> result2= <span class="string">""</span>+<span class="number">5</span>+<span class="number">5</span>+<span class="string">"abc"</span>; <span class="comment">//结果将是"55abc"</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>空文本 <strong>+</strong> 数字得到的运算结果都是把数字转成字符串，无论文本有多少个空格。但是空格会计入长度。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result1=<span class="string">""</span>+<span class="number">5</span>;         <span class="comment">// 得到的结果是"5"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result2=<span class="string">" "</span>+<span class="number">5</span>;        <span class="comment">// 得到的结果是" 5"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result3=<span class="string">"       "</span>+<span class="number">5</span>;  <span class="comment">// 得到的结果是"       5"</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>常见的不同类型运算的转换方式：</p>
<ul>
<li>字符串和数字相加，数字转成字符串.</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> one=<span class="string">"This is a test"</span>;</span><br><span class="line"><span class="keyword">var</span> two=<span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> three=one+two;</span><br><span class="line"><span class="comment">// 结果：three:This is a test123</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>数字和布尔值相加，布尔值 false 转成 0，true 转成 1</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> one=<span class="number">13</span>;</span><br><span class="line"><span class="keyword">var</span> two=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> three=one+two;</span><br><span class="line"><span class="comment">// 结果 three:14</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>字符串与布尔值相加，布尔值转化成字符串。</li>
</ul>
</li>
<li><p>取模运算的结果符号只与左边值的符号有关：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">7</span> % <span class="number">3</span>; <span class="comment">// 结果为 1</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">7</span> % (-<span class="number">3</span>); <span class="comment">// 结果为 1</span></span><br><span class="line"><span class="keyword">var</span> z = (-<span class="number">7</span>) % <span class="number">3</span>; <span class="comment">// 结果为 -1</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>如果 % 左边的操作数是正数，则模除的结果为正数或零；</li>
<li>如果 % 左边的操作数是负数，则模除的结果为负数或零。</li>
</ul>
</li>
<li><p>数字与 null(空值) 相加，null 转化为数字 0：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var car=null+3+4;    // 结果为7</span><br></pre></td></tr></tbody></table></figure>

<p>字符串与 null(空值) 相加，null 转化为字符串：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var car=null+"a";    // 结果为 nulla</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>字符串一个很能强大的数据类型；在执行加 <strong>+</strong> 时,将被加的对象统一处理为字符串。</p>
<ol>
<li>bool 类型在与数字类型进行相加时，视为 0 或者 1 处理。</li>
<li>null 类型与数字类型进行累加时，视为 0 处理。</li>
<li>bool 类型与 null 类型进行累加时，视为其与整数类型累加处理。</li>
<li>undefined 除了与字符串进行累加时有效（undefined 视为字符串”undefined”处理），其他情况皆返回 NaN。</li>
</ol>
</li>
<li><p>如果要把字符串转换为数字，可以通过减 <strong>-</strong> 运算来进行，当然这里有一种情况，就是参与运算的 <strong>string</strong> 不能被转换成合法的 <strong>number</strong> 类型，那么最后结果就会返回 <strong>NaN</strong>。</p>
</li>
</ol>
<h4 id="JavaScript-typeof-null-和-undefined"><a href="#JavaScript-typeof-null-和-undefined" class="headerlink" title="JavaScript typeof, null, 和 undefined"></a>JavaScript typeof, null, 和 undefined</h4><ol>
<li><p><strong>typeof 操作符</strong></p>
<p>你可以使用 typeof 操作符来检测变量的数据类型。在JavaScript中，数组是一种特殊的对象类型。 因此 typeof [1,2,3,4] 返回 object。</p>
</li>
<li><p><strong>null</strong></p>
<p>在 JavaScript 中 null 表示 “什么都没有”。null是一个只有一个值的特殊类型。表示一个空对象引用。 用 typeof 检测 null 返回是object。</p>
<p>你可以设置为 null 来清空对象，你也可以设置为 undefined 来清空对象。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="literal">null</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="comment">// 值为 null(空), 但类型为对象</span></span><br><span class="line">varperson = <span class="literal">undefined</span>;&nbsp;&nbsp;&nbsp;&nbsp; <span class="comment">// 值为 undefined, 类型undefined</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>undefined</strong></p>
<p>在 JavaScript 中, <strong>undefined</strong> 是一个没有设置值的变量。<strong>typeof</strong> 一个没有值的变量会返回 <strong>undefined</strong>。</p>
<p>==**任何变量都可以通过设置值为 **undefined 来清空。 类型为 <strong>undefined</strong>==</p>
</li>
</ol>
<h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><ol>
<li><p><strong>typeof 操作符</strong></p>
<p>你可以使用 <strong>typeof</strong> 操作符来查看 JavaScript 变量的数据类型。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="string">"John"</span>         <span class="comment">// 返回 string</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">3.14</span>          <span class="comment">// 返回 number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="title class_">NaN</span>           <span class="comment">// 返回 number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">false</span>         <span class="comment">// 返回 boolean</span></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]       <span class="comment">// 返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> {<span class="attr">name</span>:<span class="string">'John'</span>, <span class="attr">age</span>:<span class="number">34</span>}   <span class="comment">// 返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="title class_">Date</span>()       <span class="comment">// 返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">function</span> (<span class="params"></span>) {}     <span class="comment">// 返回 function</span></span><br><span class="line"><span class="keyword">typeof</span> myCar         <span class="comment">// 返回 undefined (如果 myCar 没有声明)</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>          <span class="comment">// 返回 object</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>constructor 属性</strong></p>
<p><strong>constructor</strong> 属性返回所有 JavaScript 变量的构造函数。</p>
<p><strong>实例</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"John"</span>.<span class="property">constructor</span>         <span class="comment">// 返回函数 String() { [native code] }</span></span><br><span class="line">(<span class="number">3.14</span>).<span class="property">constructor</span>         <span class="comment">// 返回函数 Number() { [native code] }</span></span><br><span class="line"><span class="literal">false</span>.<span class="property">constructor</span>         <span class="comment">// 返回函数 Boolean() { [native code] }</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].<span class="property">constructor</span>       <span class="comment">// 返回函数 Array()  { [native code] }</span></span><br><span class="line">{<span class="attr">name</span>:<span class="string">'John'</span>, <span class="attr">age</span>:<span class="number">34</span>}.<span class="property">constructor</span> <span class="comment">// 返回函数 Object() { [native code] }</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>().<span class="property">constructor</span>       <span class="comment">// 返回函数 Date()  { [native code] }</span></span><br><span class="line"><span class="keyword">function</span> (<span class="params"></span>) {}.<span class="property">constructor</span>     <span class="comment">// 返回函数 Function(){ [native code] }</span></span><br></pre></td></tr></tbody></table></figure>

<p>==你可以使用 constructor 属性来查看对象是否为数组 (包含字符串 “Array”),你可以使用 constructor 属性来查看对象是否为日期 (包含字符串 “Date”):==</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isArray</span>(<span class="params">myArray</span>) {</span><br><span class="line">  <span class="keyword">return</span> myArray.<span class="property">constructor</span>.<span class="title function_">toString</span>().<span class="title function_">indexOf</span>(<span class="string">"Array"</span>) &gt; -<span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isDate</span>(<span class="params">myDate</span>) {</span><br><span class="line">  <span class="keyword">return</span> myDate.<span class="property">constructor</span>.<span class="title function_">toString</span>().<span class="title function_">indexOf</span>(<span class="string">"Date"</span>) &gt; -<span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>类型转换</p>
<ol>
<li><p><strong>将数字转换为字符串</strong></p>
<p>全局方法 <strong>String()</strong> 可以将数字转换为字符串。Number 方法 <strong>toString()</strong> 也是有同样的效果。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">toExponential()</td>
<td align="left">把对象的值转换为指数计数法。</td>
</tr>
<tr>
<td align="left">toFixed()</td>
<td align="left">把数字转换为字符串，结果的小数点后有指定位数的数字。</td>
</tr>
<tr>
<td align="left">toPrecision()</td>
<td align="left">把数字格式化为指定的长度。</td>
</tr>
</tbody></table>
</li>
<li><p><strong>将日期转换为字符串</strong></p>
<p>Date() 返回字符串。全局方法 String() 可以将日期对象转换为字符串。Date 方法 <strong>toString()</strong> 也有相同的效果。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Date</span>()   <span class="comment">// 返回 Thu Jul 17 2014 15:38:19 GMT+0200 (W. Europe Daylight Time)</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">String</span>(<span class="keyword">new</span> <span class="title class_">Date</span>())   <span class="comment">// 返回 Thu Jul 17 2014 15:38:19 GMT+0200 (W. Europe Daylight Time)</span></span><br><span class="line"></span><br><span class="line">obj = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">obj.<span class="title function_">toString</span>()&nbsp;&nbsp; <span class="comment">// 返回 Thu Jul 17 2014 15:38:19 GMT+0200 (W. Europe Daylight Time)</span></span><br></pre></td></tr></tbody></table></figure>

<p>在 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/jsref/jsref-obj-date.html">Date 方法</a> 章节中，你可以查看更多关于日期转换为字符串的函数：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">getDate()</td>
<td align="left">从 Date 对象返回一个月中的某一天 (1 ~ 31)。</td>
</tr>
<tr>
<td align="left">getDay()</td>
<td align="left">从 Date 对象返回一周中的某一天 (0 ~ 6)。</td>
</tr>
<tr>
<td align="left">getFullYear()</td>
<td align="left">从 Date 对象以四位数字返回年份。</td>
</tr>
<tr>
<td align="left">getHours()</td>
<td align="left">返回 Date 对象的小时 (0 ~ 23)。</td>
</tr>
<tr>
<td align="left">getMilliseconds()</td>
<td align="left">返回 Date 对象的毫秒(0 ~ 999)。</td>
</tr>
<tr>
<td align="left">getMinutes()</td>
<td align="left">返回 Date 对象的分钟 (0 ~ 59)。</td>
</tr>
<tr>
<td align="left">getMonth()</td>
<td align="left">从 Date 对象返回月份 (0 ~ 11)。</td>
</tr>
<tr>
<td align="left">getSeconds()</td>
<td align="left">返回 Date 对象的秒数 (0 ~ 59)。</td>
</tr>
<tr>
<td align="left">getTime()</td>
<td align="left">返回 1970 年 1 月 1 日至今的毫秒数。</td>
</tr>
</tbody></table>
</li>
<li><p><strong>将字符串转换为数字</strong></p>
<p>全局方法 <strong>Number()</strong> 可以将字符串转换为数字。字符串包含数字(如 “3.14”) 转换为数字 (如 3.14).空字符串转换为 0。其他的字符串会转换为 NaN (不是个数字)。</p>
<table>
<thead>
<tr>
<th>parseFloat()</th>
<th>解析一个字符串，并返回一个浮点数。</th>
</tr>
</thead>
<tbody><tr>
<td>parseInt()</td>
<td>解析一个字符串，并返回一个整数。</td>
</tr>
</tbody></table>
</li>
<li><p><strong>将日期转换为数字</strong></p>
<p>全局方法 <strong>Number()</strong> 可将日期转换为数字(时间戳)。日期方法 <strong>getTime()</strong> 也有相同的效果。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="title class_">Number</span>(d)&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="comment">// 返回 1404568027739</span></span><br><span class="line">d = <span class="keyword">new</span> <span class="title class_">Date</span>();d.<span class="title function_">getTime</span>()&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; <span class="comment">// 返回 1404568027739</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>自动转换类型</strong></p>
<p>当 JavaScript 尝试操作一个 “错误” 的数据类型时，会自动转换为 “正确” 的数据类型。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span> + <span class="literal">null</span>&nbsp;&nbsp;&nbsp; <span class="comment">// 返回 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><br><span class="line"> <span class="literal">null</span> 转换为 <span class="number">0</span><span class="string">"5"</span> + <span class="literal">null</span>&nbsp; <span class="comment">// 返回"5null"&nbsp;&nbsp; </span></span><br><span class="line">	 <span class="literal">null</span> 转换为 <span class="string">"null"</span></span><br><span class="line">	<span class="string">"5"</span> + <span class="number">1</span> &nbsp;&nbsp;&nbsp; <span class="comment">// 返回 "51"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><br><span class="line"> <span class="number">1</span> 转换为 <span class="string">"1"</span>&nbsp; </span><br><span class="line">	<span class="string">"5"</span> - <span class="number">1</span>&nbsp;&nbsp;&nbsp;&nbsp; <span class="comment">// 返回 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><br><span class="line"> <span class="string">"5"</span> 转换为 <span class="number">5</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>一元运算符 +</p>
<p><strong>Operator +</strong> 可用于将变量转换为数字：如果变量不能转换，它仍然会是一个数字，但值为 NaN (不是一个数字):</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = <span class="string">"5"</span>;   <span class="comment">// y 是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> x = + y;   <span class="comment">// x 是一个数字</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> y = <span class="string">"John"</span>;  <span class="comment">// y 是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> x = + y;   <span class="comment">// x 是一个数字 (NaN)</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
</li>
</ol>
<hr>
<h3 id="二、进阶"><a href="#二、进阶" class="headerlink" title="二、进阶"></a>二、进阶</h3><h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="==正则表达式=="></a>==正则表达式==</h4><ol>
<li><p><strong>语法</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// /正则表达式主体/修饰符(可选)</span></span><br><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/runoob/i</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>字符串方法</p>
<p><strong>search()</strong> 方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。</p>
<p><strong>replace()</strong> 方法用于在字符串中用一些字符串替换另一些字符串，或替换一个与正则表达式匹配的子串。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Visit Runoob!"</span>; </span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">search</span>(<span class="string">"Runoob"</span>);  <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">innerHTML</span>; </span><br><span class="line"><span class="keyword">var</span> txt = str.<span class="title function_">replace</span>(<span class="regexp">/microsoft/i</span>,<span class="string">"Runoob"</span>); <span class="comment">// 替换为Visit Runoob! </span></span><br><span class="line"><span class="comment">// 使用字符串作为参数</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">innerHTML</span>; </span><br><span class="line"><span class="keyword">var</span> txt = str.<span class="title function_">replace</span>(<span class="string">"Microsoft"</span>,<span class="string">"Runoob"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>正则表达式参数可用在以上方法中 (替代字符串参数)。<br>正则表达式使得搜索功能更加强大(如实例中不区分大小写)。</p>
</li>
<li><p>修饰符</p>
<table>
<thead>
<tr>
<th align="left">修饰符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">i</td>
<td align="left">执行对大小写不敏感的匹配。</td>
</tr>
<tr>
<td align="left">g</td>
<td align="left">执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。</td>
</tr>
<tr>
<td align="left">m</td>
<td align="left">执行多行匹配。</td>
</tr>
</tbody></table>
</li>
<li><p>正则表达式模式</p>
<p>方括号用于查找某个范围内的字符：</p>
<table>
<thead>
<tr>
<th align="left">表达式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">[abc]</td>
<td align="left">查找方括号之间的任何字符。</td>
</tr>
<tr>
<td align="left">[0-9]</td>
<td align="left">查找任何从 0 至 9 的数字。</td>
</tr>
<tr>
<td align="left">(x|y)</td>
<td align="left">查找任何以 | 分隔的选项。</td>
</tr>
</tbody></table>
</li>
<li><p>元字符是拥有特殊含义的字符：</p>
<table>
<thead>
<tr>
<th align="left">元字符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">\d</td>
<td align="left">查找数字。</td>
</tr>
<tr>
<td align="left">\s</td>
<td align="left">查找空白字符。</td>
</tr>
<tr>
<td align="left">\b</td>
<td align="left">匹配单词边界。</td>
</tr>
<tr>
<td align="left">\uxxxx</td>
<td align="left">查找以十六进制数 xxxx 规定的 Unicode 字符。</td>
</tr>
</tbody></table>
</li>
<li><p>量词:</p>
<table>
<thead>
<tr>
<th align="left">量词</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">n+</td>
<td align="left">匹配任何包含至少一个 <em>n</em> 的字符串。</td>
</tr>
<tr>
<td align="left">n*</td>
<td align="left">匹配任何包含零个或多个 <em>n</em> 的字符串。</td>
</tr>
<tr>
<td align="left">n?</td>
<td align="left">匹配任何包含零个或一个 <em>n</em> 的字符串。</td>
</tr>
</tbody></table>
</li>
<li><p>正则表达式方法 </p>
<ul>
<li><p><strong>test()</strong></p>
<p>test() 方法是一个正则表达式方法。</p>
<p>test() 方法用于检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文本，则返回 true，否则返回 false。</p>
</li>
<li><p><strong>exec()</strong></p>
<p>exec() 方法是一个正则表达式方法。</p>
<p>exec() 方法用于检索字符串中的正则表达式的匹配。</p>
<p>该函数返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。</p>
</li>
</ul>
</li>
</ol>
<hr>
<h4 id="JS错误"><a href="#JS错误" class="headerlink" title="JS错误"></a>JS错误</h4><ol>
<li><p><strong>语法</strong></p>
<p><strong>try</strong> 语句测试代码块的错误。</p>
<p><strong>catch</strong> 语句处理错误。</p>
<p><strong>throw</strong> 语句创建自定义错误。</p>
<p><strong>finally</strong> 语句在 try 和 catch 语句之后，无论是否有触发异常，该语句都会执行。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) {</span><br><span class="line">  <span class="keyword">var</span> message, x;</span><br><span class="line">  message = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"p01"</span>);</span><br><span class="line">  message.<span class="property">innerHTML</span> = <span class="string">""</span>;</span><br><span class="line">  x = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">value</span>;</span><br><span class="line">  <span class="keyword">try</span> { </span><br><span class="line">    <span class="keyword">if</span>(x == <span class="string">""</span>) <span class="keyword">throw</span> <span class="string">"值是空的"</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isNaN</span>(x)) <span class="keyword">throw</span> <span class="string">"值不是一个数字"</span>;</span><br><span class="line">    x = <span class="title class_">Number</span>(x);</span><br><span class="line">    <span class="keyword">if</span>(x &gt; <span class="number">10</span>) <span class="keyword">throw</span> <span class="string">"太大"</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; <span class="number">5</span>) <span class="keyword">throw</span> <span class="string">"太小"</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">catch</span>(err) {</span><br><span class="line">    message.<span class="property">innerHTML</span> = <span class="string">"错误: "</span> + err + <span class="string">"."</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">finally</span> {</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">value</span> = <span class="string">""</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<hr>
<h4 id="JS调试"><a href="#JS调试" class="headerlink" title="JS调试"></a>JS调试</h4><p><strong>设置断点</strong></p>
<p>在调试窗口中，你可以设置 JavaScript 代码的断点。</p>
<p>在每个断点上，都会停止执行 JavaScript 代码，以便于我们检查 JavaScript 变量的值。</p>
<p>在检查完毕后，可以重新执行代码（如播放按钮）。</p>
<hr>
<p><strong>debugger 关键字</strong></p>
<p><strong>debugger</strong> 关键字用于停止执行 JavaScript，并调用调试函数。</p>
<p>这个关键字与在调试工具中设置断点的效果是一样的。</p>
<p>如果没有调试可用，debugger 语句将无法工作。</p>
<p>开启 debugger ，代码在第三行前停止执行。</p>
<p><strong>实例</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">15</span> * <span class="number">5</span>; <span class="keyword">debugger</span>; <span class="variable language_">document</span>.<span class="title function_">getElementbyId</span>(<span class="string">"demo"</span>).<span class="property">innerHTML</span> = x;</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="JS-声明提升"><a href="#JS-声明提升" class="headerlink" title="JS 声明提升"></a>JS 声明提升</h4><p><strong>JavaScript 声明提升</strong></p>
<p>JavaScript 中，函数及变量的声明都将被提升到函数的最顶部。</p>
<p>JavaScript 中，变量可以在使用后声明，也就是变量可以先使用再声明。</p>
<p><strong>JavaScript 初始化不会提升</strong></p>
<p>JavaScript 只有声明的变量会提升，初始化的不会。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">5</span>; <span class="comment">// 初始化 x</span></span><br><span class="line"></span><br><span class="line">elem = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>); <span class="comment">// 查找元素 </span></span><br><span class="line">elem.<span class="property">innerHTML</span> = x + <span class="string">" "</span> + y;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 显示 x 和 y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">7</span>; <span class="comment">// 初始化 y</span></span><br><span class="line"><span class="comment">// 输出undefined，这是因为变量声明 (var y) 提升了，但是初始化(y = 7) 并不会提升，所以 y 变量是一个未定义的变量。</span></span><br></pre></td></tr></tbody></table></figure>

<hr>
<h4 id="JS严格模式"><a href="#JS严格模式" class="headerlink" title="JS严格模式"></a>JS严格模式</h4><ol>
<li><p><strong>使用 “use strict” 指令</strong></p>
<p>“use strict” 指令在 JavaScript 1.8.5 (ECMAScript5) 中新增。它不是一条语句，但是是一个字面量表达式，在 JavaScript 旧版本中会被忽略。</p>
<p>“use strict” 的目的是指定代码在严格条件下执行。严格模式下你不能使用未声明的变量。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span> 指令在 <span class="title class_">JavaScript</span> <span class="number">1.8</span><span class="number">.5</span> (<span class="title class_">ECMAScript5</span>) 中新增。它不是一条语句，但是是一个字面量表达式，在 <span class="title class_">JavaScript</span> 旧版本中会被忽略。</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">"use strict"</span> 的目的是指定代码在严格条件下执行。严格模式下你不能使用未声明的变量。</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>严格模式的限制</strong></p>
<p>不允许使用未声明的变量：</p>
<p>不允许删除变量或对象</p>
<p>不允许删除函数。</p>
<p>不允许变量重名:</p>
<p>不允许使用八进制:</p>
<p>不允许使用转义字符:</p>
<p>不允许对只读属性赋值:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> x = \<span class="number">010</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = {};</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">"x"</span>, {<span class="attr">value</span>:<span class="number">0</span>, <span class="attr">writable</span>:<span class="literal">false</span>});</span><br><span class="line">obj.<span class="property">x</span> = <span class="number">3.14</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>不允许对一个使用getter方法读取的属性进行赋值</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = {</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">x</span>() </span><br><span class="line">    {<span class="keyword">return</span> <span class="number">0</span>}</span><br><span class="line">};</span><br><span class="line">obj.<span class="property">x</span> = <span class="number">3.14</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>不允许删除一个不允许删除的属性：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>变量名不能使用 “eval” 字符串:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="built_in">eval</span> = <span class="number">3.14</span>;     <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>变量名不能使用 “arguments” 字符串:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="variable language_">arguments</span> = <span class="number">3.14</span>;  <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>不允许使用以下这种语句:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">with</span> (<span class="title class_">Math</span>){x = <span class="title function_">cos</span>(<span class="number">2</span>)}; <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>由于一些安全原因，在作用域 eval() 创建的变量不能被调用：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="built_in">eval</span> (<span class="string">"var x = 2"</span>);</span><br><span class="line">alert (x);        <span class="comment">// 报错</span></span><br></pre></td></tr></tbody></table></figure>

<p>禁止this关键字指向全局对象。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>){</span><br><span class="line">    <span class="keyword">return</span> !<span class="variable language_">this</span>;</span><br><span class="line">} </span><br><span class="line"><span class="comment">// 返回false，因为"this"指向全局对象，"!this"就是false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>){ </span><br><span class="line">    <span class="string">"use strict"</span>;</span><br><span class="line">    <span class="keyword">return</span> !<span class="variable language_">this</span>;</span><br><span class="line">} </span><br><span class="line"><span class="comment">// 返回true，因为严格模式下，this的值为undefined，所以"!this"为true。</span></span><br></pre></td></tr></tbody></table></figure>

<p>因此，使用构造函数时，如果忘了加new，this不再指向全局对象，而是报错。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>){</span><br><span class="line">    <span class="string">"use strict"</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">};</span><br><span class="line"><span class="title function_">f</span>();<span class="comment">// 报错，this未定义</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<hr>
<h4 id="浮点型数据使用注意事项"><a href="#浮点型数据使用注意事项" class="headerlink" title="浮点型数据使用注意事项"></a>浮点型数据使用注意事项</h4><p>JavaScript 中的所有数据都是以 64 位<strong>浮点型数据(float)</strong> 来存储。</p>
<p>所有的编程语言，包括 JavaScript，对浮点型数据的精确度都很难确定：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0.1</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="number">0.2</span>;</span><br><span class="line"><span class="keyword">var</span> z = x + y      <span class="comment">// z 的结果为 0.30000000000000004</span></span><br><span class="line"><span class="keyword">if</span> (z == <span class="number">0.3</span>)      <span class="comment">// 返回 false</span></span><br></pre></td></tr></tbody></table></figure>

<p>为解决以上问题，可以用整数的乘除法来解决：</p>
<p><strong>实例</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> z = (x * <span class="number">10</span> + y * <span class="number">10</span>) / <span class="number">10</span>;    <span class="comment">// z 的结果为 0.3</span></span><br></pre></td></tr></tbody></table></figure>

<p>更多内容可以参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/w3cnote/js-precision-problem-and-solution.html">JavaScript 中精度问题以及解决方案</a></p>
<hr>
<h4 id="JS-表单验证API"><a href="#JS-表单验证API" class="headerlink" title="JS 表单验证API"></a>JS 表单验证API</h4><ol>
<li><p><strong>约束验证 DOM 方法</strong></p>
<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">checkValidity()</td>
<td align="left">如果 input 元素中的数据是合法的返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">setCustomValidity()</td>
<td align="left">设置 input 元素的 validationMessage 属性，用于自定义错误提示信息的方法。使用 setCustomValidity 设置了自定义提示后，validity.customError 就会变成 true，checkValidity 总是会返回 false。如果要重新判断需要取消自定义提示，方式如下：<code>setCustomValidity('')  setCustomValidity(null)  setCustomValidity(undefined)</code></td>
</tr>
</tbody></table>
</li>
<li><p><strong>约束验证 DOM 属性</strong></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">validity</td>
<td align="left">布尔属性值，返回 input 输入值是否合法</td>
</tr>
<tr>
<td align="left">validationMessage</td>
<td align="left">浏览器错误提示信息</td>
</tr>
<tr>
<td align="left">willValidate</td>
<td align="left">指定 input 是否需要验证</td>
</tr>
</tbody></table>
</li>
<li><p><strong>Validity 属性</strong></p>
<p>input 元素的 <strong>validity 属性</strong>包含一系列关于 validity 数据属性:</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">customError</td>
<td align="left">设置为 true, 如果设置了自定义的 validity 信息。</td>
</tr>
<tr>
<td align="left">patternMismatch</td>
<td align="left">设置为 true, 如果元素的值不匹配它的模式属性。</td>
</tr>
<tr>
<td align="left">rangeOverflow</td>
<td align="left">设置为 true, 如果元素的值大于设置的最大值。</td>
</tr>
<tr>
<td align="left">rangeUnderflow</td>
<td align="left">设置为 true, 如果元素的值小于它的最小值。</td>
</tr>
<tr>
<td align="left">stepMismatch</td>
<td align="left">设置为 true, 如果元素的值不是按照规定的 step 属性设置。</td>
</tr>
<tr>
<td align="left">tooLong</td>
<td align="left">设置为 true, 如果元素的值超过了 maxLength 属性设置的长度。</td>
</tr>
<tr>
<td align="left">typeMismatch</td>
<td align="left">设置为 true, 如果元素的值不是预期相匹配的类型。</td>
</tr>
<tr>
<td align="left">valueMissing</td>
<td align="left">设置为 true，如果元素 (required 属性) 没有值。</td>
</tr>
<tr>
<td align="left">valid</td>
<td align="left">设置为 true，如果元素的值是合法的。</td>
</tr>
</tbody></table>
</li>
</ol>
<hr>
<h4 id="this关键字"><a href="#this关键字" class="headerlink" title="this关键字"></a>this关键字</h4><p>面向对象语言中 this 表示当前对象的一个引用。</p>
<p>但在 JavaScript 中 this 不是固定不变的，它会随着执行环境的改变而改变。</p>
<ul>
<li>在方法中，this 表示该方法所属的对象。</li>
<li>如果单独使用，this 表示全局对象。</li>
<li>在函数中，this 表示全局对象。</li>
<li>在函数中，在严格模式下，this 是未定义的(undefined)。</li>
<li>在事件中，this 表示接收事件的元素。</li>
<li>类似 call() 和 apply() 方法可以将 this 引用到任何对象。</li>
</ul>
<p><strong>显式函数绑定</strong></p>
<p>在 JavaScript 中函数也是对象，对象则有方法，apply 和 call 就是函数对象的方法。这两个方法异常强大，他们允许切换函数执行的上下文环境（context），即 this 绑定的对象。在下面实例中，当我们使用 person2 作为参数来调用 person1.fullName 方法时, <strong>this</strong> 将指向 person2, 即便它是 person1 的方法：</p>
<p><strong>实例</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = {</span><br><span class="line">  <span class="attr">fullName</span>: <span class="keyword">function</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">" "</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> person2 = {</span><br><span class="line">  <span class="attr">firstName</span>:<span class="string">"John"</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">"Doe"</span>,</span><br><span class="line">}</span><br><span class="line">person1.<span class="property">fullName</span>.<span class="title function_">call</span>(person2);  <span class="comment">// 返回 "John Doe"</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/js/javascript-json-parse.html">JSON.parse()</a></td>
<td align="left">用于将一个 JSON 字符串转换为 JavaScript 对象。</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/js/javascript-json-stringify.html">JSON.stringify()</a></td>
<td align="left">用于将 JavaScript 值转换为 JSON 字符串。</td>
</tr>
</tbody></table>
<hr>
<h4 id="JS异步编程"><a href="#JS异步编程" class="headerlink" title="JS异步编程"></a>JS异步编程</h4><ol>
<li><p>异步（Asynchronous, async）是与同步（Synchronous, sync）相对的概念。同步按你的代码顺序执行，异步不按照代码顺序执行，异步的执行效率更高。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/.fun//async-sync.png" alt="async-sync"></p>
<p>我们常常用子线程来完成一些可能消耗时间足够长以至于被用户察觉的事情，比如读取一个大文件或者发出一个网络请求。因为子线程独立于主线程，所以即使出现阻塞也不会影响主线程的运行。但是子线程有一个局限：一旦发射了以后就会与主线程失去同步，我们无法确定它的结束，如果结束之后需要处理一些事情，比如处理来自服务器的信息，我们是无法将它合并到主线程中去的。</p>
<p>为了解决这个问题，JavaScript 中的异步操作函数往往通过回调函数来实现异步任务的结果处理。</p>
</li>
<li><p><strong>回调函数</strong></p>
<p>回调函数就是一个函数，它是在我们启动一个异步任务的时候就告诉它：等你完成了这个任务之后要干什么。这样一来主线程几乎不用关心异步任务的状态了，他自己会善始善终。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo1"</span>).<span class="property">innerHTML</span>=<span class="string">"RUNOOB-1!"</span>;  <span class="comment">// 三秒后子线程执行</span></span><br><span class="line">}, <span class="number">3000</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo2"</span>).<span class="property">innerHTML</span>=<span class="string">"RUNOOB-2!"</span>;      <span class="comment">// 主线程先执行</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>异步Ajax</strong></p>
<p>除了 setTimeout 函数以外，异步回调广泛应用于 AJAX 编程。有关于 AJAX 详细请参见：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/ajax/ajax-tutorial.html">https://www.runoob.com/ajax/ajax-tutorial.html</a></p>
<p>XMLHttpRequest 常常用于请求来自远程服务器上的 XML 或 JSON 数据。一个标准的 XMLHttpRequest 对象往往包含多个回调：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"> </span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="comment">// 输出接收到的文字数据</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">innerHTML</span>=xhr.<span class="property">responseText</span>;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">xhr.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">innerHTML</span>=<span class="string">"请求出错"</span>;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 发送异步 GET 请求</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">"GET"</span>, <span class="string">"https://www.runoob.com/try/ajax/ajax_info.txt"</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<hr>
<h4 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h4><p>Promise 是一个 ECMAScript 6 提供的类，目的是更加优雅地书写复杂的异步任务。</p>
<ol>
<li><p>构造 Promise</p>
<p>现在我们新建一个 Promise 对象：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) {</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"First"</span>);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">    }, <span class="number">1000</span>);</span><br><span class="line">}).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) {</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"Second"</span>);</span><br><span class="line">            <span class="title function_">resolve</span>();</span><br><span class="line">        }, <span class="number">4000</span>);</span><br><span class="line">    });</span><br><span class="line">}).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"Third"</span>);</span><br><span class="line">    }, <span class="number">3000</span>);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>Promise 的构造函数</strong></p>
<p>Promise 构造函数是 JavaScript 中用于创建 Promise 对象的内置构造函数。</p>
<p>Promise 构造函数接受一个函数作为参数，该函数是同步的并且会被立即执行，所以我们称之为起始函数。起始函数包含两个参数 resolve 和 reject，分别表示 Promise 成功和失败的状态。</p>
<p>起始函数执行成功时，它应该调用 resolve 函数并传递成功的结果。当起始函数执行失败时，它应该调用 reject 函数并传递失败的原因。</p>
<p>Promise 构造函数返回一个 Promise 对象，该对象具有以下几个方法：</p>
<ul>
<li>then：用于处理 Promise 成功状态的回调函数。</li>
<li>catch：用于处理 Promise 失败状态的回调函数。</li>
<li>finally：无论 Promise 是成功还是失败，都会执行的回调函数。</li>
</ul>
<p>下面是一个使用 Promise 构造函数创建 Promise 对象的例子：</p>
<p>当 Promise 被构造时，起始函数会被同步执行：</p>
<p><strong>实例</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">  <span class="comment">// 异步操作</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.5</span>) {</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">'success'</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="title function_">reject</span>(<span class="string">'error'</span>);</span><br><span class="line">    }</span><br><span class="line">  }, <span class="number">1000</span>);</span><br><span class="line">});</span><br><span class="line"> </span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">}).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>常见问题</p>
<p><strong>Q: 除了 then 块以外，其它两种块能否多次使用？</strong></p>
<p>A: 可以，finally 与 then 一样会按顺序执行，但是 catch 块只会执行第一个，除非 catch 块里有异常。所以最好只安排一个 catch 和 finally 块。</p>
<p><strong>Q: then 块如何中断？</strong></p>
<p>A: then 块默认会向下顺序执行，return 是不能中断的，可以通过 throw 来跳转至 catch 实现中断。</p>
<p><strong>Q: Promise 是一种将异步转换为同步的方法吗？</strong></p>
<p>A: 完全不是。Promise 只不过是一种更良好的编程风格。</p>
<p><strong>Q: 什么时候我们需要再写一个 then 而不是在当前的 then 接着编程？</strong></p>
<p>A: 当你又需要调用一个异步任务的时候。</p>
</li>
<li><p><strong>异步函数</strong></p>
<p>异步函数（async function）是 ECMAScript 2017 (ECMA-262) 标准的规范，几乎被所有浏览器所支持，除了 Internet Explorer。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">print</span>(<span class="number">1000</span>, <span class="string">"First"</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">print</span>(<span class="number">4000</span>, <span class="string">"Second"</span>);</span><br><span class="line">}).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="title function_">print</span>(<span class="number">3000</span>, <span class="string">"Third"</span>);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>我们可以将这段代码变得更好看：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">print</span>(<span class="number">1000</span>, <span class="string">"First"</span>);</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">print</span>(<span class="number">4000</span>, <span class="string">"Second"</span>);</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">print</span>(<span class="number">3000</span>, <span class="string">"Third"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="title function_">asyncFunc</span>();</span><br></pre></td></tr></tbody></table></figure>

<p>处理异常的机制将用 try-catch 块实现：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) {    </span><br><span class="line">    <span class="keyword">try</span> {        </span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) {            </span><br><span class="line">            <span class="keyword">throw</span> <span class="string">"Some error"</span>; <span class="comment">// 或者 reject("Some error")        </span></span><br><span class="line">        });    </span><br><span class="line">    } <span class="keyword">catch</span> (err) {        </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);        <span class="comment">// 会输出 Some error    </span></span><br><span class="line">    } </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line"><span class="title function_">asyncFunc</span>();   </span><br></pre></td></tr></tbody></table></figure>

<p>如果 Promise 有一个正常的返回值，await 语句也会返回它：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(</span><br><span class="line">        <span class="keyword">function</span> (<span class="params">resolve, reject</span>) {</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">"Return value"</span>);</span><br><span class="line">        }</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">}</span><br><span class="line"><span class="title function_">asyncFunc</span>();   <span class="comment">// Return value</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<hr>
<h4 id="JS函数定义"><a href="#JS函数定义" class="headerlink" title="JS函数定义"></a>JS函数定义</h4><ol>
<li><p><strong>函数声明</strong></p>
<p>在之前的教程中，你已经了解了函数声明的语法 :</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function functionName(parameters) {</span><br><span class="line">  执行的代码</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>函数表达式</strong></p>
<p>JavaScript 函数可以通过一个表达式定义。</p>
</li>
<li><p><strong>Function() 构造函数</strong></p>
<p>在以上实例中，我们了解到函数通过关键字 <strong>function</strong> 定义。</p>
<p>函数同样可以通过内置的 JavaScript 函数构造器（Function()）定义。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myFunction = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"return a * b"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="title function_">myFunction</span>(<span class="number">4</span>, <span class="number">3</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>实际上，你不必使用构造函数。上面实例可以写成：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myFunction = <span class="keyword">function</span> (<span class="params">a, b</span>) {<span class="keyword">return</span> a * b};</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="title function_">myFunction</span>(<span class="number">4</span>, <span class="number">3</span>);</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th></th>
<th>在 JavaScript 中，很多时候，你需要避免使用 <strong>new</strong> 关键字。</th>
</tr>
</thead>
</table>
</li>
<li><p><strong>函数提升（Hoisting）</strong></p>
<p>在之前的教程中我们已经了解了 “hoisting(提升)”。</p>
<p>提升（Hoisting）是 JavaScript 默认将当前作用域提升到前面去的行为。</p>
<p>提升（Hoisting）应用在变量的声明与函数的声明。</p>
<p>因此，函数可以在声明之前调用：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">myFunction</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">y</span>) {</span><br><span class="line">    <span class="keyword">return</span> y * y;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>自调用函数</strong></p>
<p>函数表达式可以 “自调用”。自调用表达式会自动调用。如果表达式后面紧跟 () ，则会自动调用。不能自调用声明的函数。通过添加括号，来说明它是一个函数表达式：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">  <span class="keyword">var</span> x = <span class="string">"Hello!!"</span>;   <span class="comment">// 我将调用自己</span></span><br><span class="line">})();</span><br></pre></td></tr></tbody></table></figure>

<p>以上函数实际上是一个 <strong>匿名自我调用的函数</strong> (没有函数名)。</p>
</li>
<li><p><strong>箭头函数</strong></p>
<p>ES6 新增了箭头函数。箭头函数表达式的语法比普通函数表达式更简洁。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">参数<span class="number">1</span> =&gt; { 函数声明 }     <span class="comment">// 一个参数</span></span><br><span class="line">() =&gt; {<span class="keyword">return</span> 表达式;}   <span class="comment">// 没有参数</span></span><br><span class="line">(参数<span class="number">1</span>, 参数<span class="number">2</span>, …, 参数N) =&gt; 表达式(单一)</span><br><span class="line"><span class="comment">// 相当于：(参数1, 参数2, …, 参数N) =&gt;{ return 表达式; }</span></span><br></pre></td></tr></tbody></table></figure>

<p>有的箭头函数都没有自己的 <strong>this</strong>。 不适合定义一个 <strong>对象的方法</strong>。</p>
<p>当我们使用箭头函数的时候，箭头函数会默认帮我们绑定外层 this 的值，所以在箭头函数中 this 的值和外层的 this 是一样的。</p>
<p>箭头函数是不能提升的，所以需要在使用之前定义。</p>
<p>使用 <strong>const</strong> 比使用 <strong>var</strong> 更安全，因为函数表达式始终是一个常量。</p>
<p>如果函数部分只是一个语句，则可以省略 return 关键字和大括号 {}，这样做是一个比较好的习惯</p>
</li>
</ol>
<hr>
<h4 id="JS函数参数"><a href="#JS函数参数" class="headerlink" title="JS函数参数"></a>JS函数参数</h4><ol>
<li><p>arguments 对象</p>
<p>JavaScript 函数有个内置的对象 arguments 对象。</p>
<p>arguments 对象包含了函数调用的参数数组。</p>
<p>通过这种方式你可以很方便的找到最大的一个参数的值：</p>
</li>
<li><p><strong>通过值传递参数</strong></p>
<p>在函数中调用的参数是函数的隐式参数。</p>
<p>JavaScript 隐式参数通过值来传递：函数仅仅只是获取值。</p>
<p>如果函数修改参数的值，不会修改显式参数的初始值（在函数外定义）。</p>
<p>隐式参数的改变在函数外是不可见的。</p>
</li>
<li><p>通过对象传递参数</p>
<p>在JavaScript中，可以引用对象的值。</p>
<p>因此我们在函数内部修改对象的属性就会修改其初始的值。</p>
<p>修改对象属性可作用于函数外部（全局变量）。</p>
<p>修改对象属性在函数外是可见的</p>
</li>
<li><p>对arguments的延申：</p>
<p>其实Javascript并没有重载函数的功能，但是Arguments对象能够模拟重载。</p>
<p>Javascrip中每个函数都会有一个Arguments对象实例arguments</p>
<p>它引用着函数的实参，可以用数组下标的方式”[]”引用arguments的元素。</p>
<p>arguments.length为函数实参个数</p>
<p>arguments.callee引用函数自身。</p>
</li>
</ol>
<h4 id="JS函数调用"><a href="#JS函数调用" class="headerlink" title="JS函数调用"></a>JS函数调用</h4><p><strong>JavaScript 函数调用</strong></p>
<p>JavaScript 函数有 4 种调用方式。</p>
<p>每种方式的不同在于 <strong>this</strong> 的初始化。</p>
<p><strong>this 关键字</strong></p>
<p>一般而言，在Javascript中，this指向函数执行时的当前对象。</p>
<ol>
<li><p><strong>作为一个函数调用</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">a, b</span>) {</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">}</span><br><span class="line"><span class="title function_">myFunction</span>(<span class="number">10</span>, <span class="number">2</span>);           <span class="comment">// myFunction(10, 2) 返回 20</span></span><br></pre></td></tr></tbody></table></figure>

<p>以上函数不属于任何对象。但是在 JavaScript 中它始终是默认的全局对象。</p>
<p>在 HTML 中默认的全局对象是 HTML 页面本身，所以函数是属于 HTML 页面。</p>
<p>在浏览器中的页面对象是浏览器窗口(window 对象)。以上函数会自动变为 window 对象的函数。</p>
</li>
<li><p><strong>函数作为方法调用</strong></p>
<p>在 JavaScript 中你可以将函数定义为对象的方法。</p>
<p>以下实例创建了一个对象 (<strong>myObject</strong>), 对象有两个属性 (<strong>firstName</strong> 和 <strong>lastName</strong>), 及一个方法 (<strong>fullName</strong>):</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = {</span><br><span class="line">    <span class="attr">firstName</span>:<span class="string">"John"</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">"Doe"</span>,</span><br><span class="line">    <span class="attr">fullName</span>: <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">myObject.<span class="title function_">fullName</span>();          <span class="comment">// 返回 [object Object] (所有者对象)</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>fullName</strong> 方法是一个函数。函数属于对象。 <strong>myObject</strong> 是函数的所有者。</p>
<p><strong>this</strong>对象，拥有 JavaScript 代码。实例中 <strong>this</strong> 的值为 <strong>myObject</strong> 对象。</p>
</li>
<li><p><strong>使用构造函数调用函数</strong></p>
<p>如果函数调用前使用了 <strong>new</strong> 关键字, 则是调用了构造函数。</p>
<p>这看起来就像创建了新的函数，但实际上 JavaScript 函数是重新创建的对象：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数: </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">arg1, arg2</span>) {    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">firstName</span> = arg1;    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lastName</span>  = arg2; </span><br><span class="line">}  <span class="comment">// This creates a new object </span></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title function_">myFunction</span>(<span class="string">"John"</span>,<span class="string">"Doe"</span>); </span><br><span class="line">x.<span class="property">firstName</span>;                             <span class="comment">// 返回 "John"</span></span><br></pre></td></tr></tbody></table></figure>

<p>构造函数的调用会创建一个新的对象。新对象会继承构造函数的属性和方法。</p>
<table>
<thead>
<tr>
<th></th>
<th>构造函数中 <strong>this</strong> 关键字没有任何的值。 <strong>this</strong> 的值在函数调用实例化对象(new object)时创建。</th>
</tr>
</thead>
</table>
</li>
<li><p>作为函数方法调用函数<br>在 JavaScript 中, 函数是对象。JavaScript 函数有它的属性和方法。</p>
<p>call() 和 apply() 是预定义的函数方法。 两个方法可用于调用函数，两个方法的第一个参数必须是对象本身。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">a, b</span>) {</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">}</span><br><span class="line">myObject = myFunction.<span class="title function_">call</span>(myObject, <span class="number">10</span>, <span class="number">2</span>);     <span class="comment">// 返回 20</span></span><br><span class="line"></span><br><span class="line">myArray = [<span class="number">10</span>, <span class="number">2</span>];</span><br><span class="line">myObject = myFunction.<span class="title function_">apply</span>(myObject, myArray);  <span class="comment">// 返回 20</span></span><br></pre></td></tr></tbody></table></figure>

<p>两个方法都使用了对象本身作为第一个参数。 两者的区别在于第二个参数： apply传入的是一个参数数组，也就是将多个参数组合成为一个数组传入，而call则作为call的参数传入（从第二个参数开始）。</p>
<p>在 JavaScript 严格模式(strict mode)下, 在调用函数时第一个参数会成为 <strong>this</strong> 的值， 即使该参数不是一个对象。</p>
<p>在 JavaScript 非严格模式(non-strict mode)下, 如果第一个参数的值是 null 或 undefined, 它将使用全局对象替代。</p>
<table>
<thead>
<tr>
<th></th>
<th>通过 call() 或 apply() 方法你可以设置 <strong>this</strong> 的值, 且作为已存在对象的新方法调用。</th>
</tr>
</thead>
</table>
</li>
<li><p>结合本节知识点分享一段有趣的代码。</p>
<p>获取当前页面所有图片的 url:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[].<span class="property">map</span>.<span class="title function_">call</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">'img'</span>), <span class="keyword">function</span> (<span class="params">img</span>){ <span class="keyword">return</span> img.<span class="property">src</span>;})</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<hr>
<h4 id="JS闭包"><a href="#JS闭包" class="headerlink" title="==JS闭包=="></a>==JS闭包==</h4><p>JavaScript 变量可以是局部变量或全局变量。私有变量可以用到闭包。</p>
<p>函数可以访问由函数内部定义的变量，函数也可以访问函数外部定义的变量，如：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">4</span>;		<span class="comment">// a 为局部变量，局部变量只能用于定义它函数内部。对于其他的函数或脚本代码是不可用的。</span></span><br><span class="line">    <span class="keyword">return</span> a * a;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">4</span>;		<span class="comment">// a为全局变量，在web页面中全局变量属于 window 对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">return</span> a * a;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li><p><strong>变量生命周期</strong></p>
<p>全局变量的作用域是全局性的，即在整个JavaScript程序中，全局变量处处都在。</p>
<p>而在函数内部声明的变量，只在函数内部起作用。这些变量是局部变量，作用域是局部性的；函数的参数也是局部性的，只在函数内部起作用。</p>
</li>
<li><p><strong>计数器困境</strong></p>
<p>设想下如果你想统计一些数值，且该计数器在所有函数中都是可用的。</p>
<p>你可以使用全局变量，函数设置计数器递增：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = <span class="number">0</span>;  </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) {   </span><br><span class="line">    <span class="keyword">return</span> counter += <span class="number">1</span>; </span><br><span class="line">}  </span><br><span class="line"><span class="title function_">add</span>(); <span class="title function_">add</span>(); <span class="title function_">add</span>();  <span class="comment">// 计数器现在为 3</span></span><br></pre></td></tr></tbody></table></figure>

<p>计数器数值在执行 add() 函数时发生变化。</p>
<p>但问题来了，页面上的任何脚本都能改变计数器，即便没有调用 add() 函数。</p>
<p>如果我在函数内声明计数器，如果没有调用函数将无法修改计数器的值：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> counter += <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="title function_">add</span>();<span class="title function_">add</span>();<span class="title function_">add</span>();  <span class="comment">// 输出都是1</span></span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p><strong>JavaScript 内嵌函数</strong></p>
<p>所有函数都能访问全局变量。 </p>
<p>实际上，在 JavaScript 中，所有函数都能访问它们上一层的作用域。</p>
<p>JavaScript 支持嵌套函数。嵌套函数可以访问上一层的函数变量。</p>
<p>该实例中，内嵌函数 <strong>plus()</strong> 可以访问父函数的 <strong>counter</strong> 变量：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">plus</span>(<span class="params"></span>) {counter += <span class="number">1</span>;}</span><br><span class="line">    <span class="title function_">plus</span>();    </span><br><span class="line">    <span class="keyword">return</span> counter; </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>如果我们能在外部访问 <strong>plus()</strong> 函数，这样就能解决计数器的困境。</p>
<p>我们同样需要确保 <strong>counter = 0</strong> 只执行一次。</p>
<p><strong>我们需要闭包。</strong></p>
</li>
<li><p>==JavaScript 闭包==</p>
<p>还记得函数自我调用吗？该函数会做什么？</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = (<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) {<span class="keyword">return</span> counter += <span class="number">1</span>;}</span><br><span class="line">})();</span><br><span class="line"> </span><br><span class="line"><span class="title function_">add</span>();<span class="title function_">add</span>();<span class="title function_">add</span>();<span class="comment">// 计数器为 3</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>实例解析</strong></p>
<p>变量 <strong>add</strong> 指定了函数自我调用的返回字值。</p>
<p>自我调用函数只执行一次。设置计数器为 0。并返回函数表达式。</p>
<p>add变量可以作为一个函数使用。非常棒的部分是它可以访问函数上一层作用域的计数器。</p>
<p>这个叫作 JavaScript <strong>闭包。</strong>它使得函数拥有私有变量变成可能。</p>
<p>计数器受匿名函数的作用域保护，只能通过 add 方法修改。</p>
<table>
<thead>
<tr>
<th></th>
<th>闭包是一种保护私有变量的机制，在函数执行时形成私有的作用域，保护里面的私有变量不受外界干扰。直观的说就是形成一个不销毁的栈环境。</th>
</tr>
</thead>
</table>
</li>
</ol>
<h4 id="JS类"><a href="#JS类" class="headerlink" title="JS类"></a>JS类</h4><p><strong>类方法</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/js/jsref-constructor-class.html">constructor()</a></td>
<td align="left">构造函数，用于创建和初始化类</td>
</tr>
</tbody></table>
<p><strong>类关键字</strong></p>
<table>
<thead>
<tr>
<th align="left">关键字</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/js/jsref-class-extends.html">extends</a></td>
<td align="left">继承一个类</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/js/jsref-class-static.html">static</a></td>
<td align="left">在类中定义一个静态方法</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/js/jsref-class-super.html">super</a></td>
<td align="left">调用父类的构造方法</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Runoob</span> {</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, year</span>) {</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">  }</span><br><span class="line">  <span class="title function_">age</span>(<span class="params">x</span>) {</span><br><span class="line">    <span class="keyword">return</span> x - <span class="variable language_">this</span>.<span class="property">year</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">let</span> year = date.<span class="title function_">getFullYear</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> runoob = <span class="keyword">new</span> <span class="title class_">Runoob</span>(<span class="string">"菜鸟教程"</span>, <span class="number">2020</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">"demo"</span>).<span class="property">innerHTML</span>=</span><br><span class="line"><span class="string">"菜鸟教程 "</span> + runoob.<span class="title function_">age</span>(year) + <span class="string">" 岁了。"</span>;</span><br></pre></td></tr></tbody></table></figure>











<h3 id="三、高阶"><a href="#三、高阶" class="headerlink" title="三、高阶"></a>三、高阶</h3><h4 id="JS-I-O"><a href="#JS-I-O" class="headerlink" title="JS I/O"></a>JS I/O</h4><ol>
<li><p><code>console.log</code>添加显示样式</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'%chello'</span>, <span class="string">'font-size:20px'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>我们用 IIFE 封装下:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) {</span><br><span class="line">       <span class="keyword">var</span> _log = <span class="variable language_">console</span>.<span class="property">log</span>;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="property">log</span> = <span class="keyword">function</span>(<span class="params"></span>) {</span><br><span class="line">           <span class="keyword">if</span> (<span class="title function_">typeof</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]) != <span class="string">'object'</span> &amp;&amp; <span class="title function_">typeof</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]) != <span class="string">'function'</span> &amp;&amp; <span class="variable language_">arguments</span>.<span class="property">length</span> == <span class="number">1</span>) {</span><br><span class="line">               _log.<span class="title function_">call</span>(<span class="variable language_">console</span>, <span class="string">'%c'</span> + <span class="variable language_">arguments</span>[<span class="number">0</span>], <span class="string">"text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em"</span>)</span><br><span class="line">           } <span class="keyword">else</span> {</span><br><span class="line">               _log.<span class="title function_">call</span>(<span class="variable language_">console</span>, ...<span class="variable language_">arguments</span>)</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line">   })()</span><br></pre></td></tr></tbody></table></figure>

<p>代码的意思是如果 console 只有一个参数，并且不是函数或者对象就用我们定义的样式，否则用 console 的默认输入。然后用油猴之类的插件在页面加载时就加载这个函数，就可以告别原来无聊的调试了，当然你也可以写一个样式库，写一个随机函数，这样每次 console 都会有惊喜了。</p>
</li>
<li><p>解决文档已完成加载后执行 document.write，整个 HTML 页面将被覆盖的问题：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick=<span class="string">"winTest()"</span>&gt;按钮&lt;/button&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">winTest</span>(<span class="params"></span>)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">var</span> txt1 = <span class="string">"This is a new window."</span>;</span><br><span class="line">    <span class="keyword">var</span> txt2 = <span class="string">"This is a test."</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">open</span>(<span class="string">"text/html"</span>,<span class="string">"replace"</span>);<span class="comment">//加上</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">writeln</span>(txt1);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(txt2);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">close</span>();<span class="comment">//加上</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>点击 “按钮” 后页面显示结果：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">This</span> is a <span class="keyword">new</span> <span class="variable language_">window</span>. <span class="title class_">This</span> is a test.</span><br></pre></td></tr></tbody></table></figure>

<p><strong>注：</strong>该方法将关闭 open() 方法打开的文档流，并强制地显示出所有缓存的输出内容。如果您使用 write() 方法动态地输出一个文档，必须记住当你这么做的时候要调用 close() 方法，以确保所有文档内容都能显示。document.write() 不会隐式调用 document.close() 方法的，否则例 2 中将不会有 <strong>This is a new window.</strong> 内容了</p>
<p>   一旦调用了close()，就不应该再次调用 write()，因为这会隐式地调用 open() 来擦除当前文档并开始一个新的文档。</p>
<p>   在载入页面后，浏览器输出流自动关闭。在此之后，比如延迟脚本 [setTimeout()] 或是 onload 执行的方法，任何一个对当前页面进行操作的 document.write()方法将打开—个新的输出流，它将清除当前页面内容(包括源文档的任何变量或值)。</p>
</li>
</ol>
<hr>
<h4 id="JS-注释"><a href="#JS-注释" class="headerlink" title="JS 注释"></a>JS 注释</h4><p>应用注释符号验证浏览器是否支持 JavaScript 脚本功能</p>
<p>如果用户不能确定浏览器是否支持JavaScript脚本，那么可以应用HTML提供的注释符号进行验证。HTML注释符号是以 <strong>&lt;–** 开始以 **–&gt;</strong> 结束的。如果在此注释符号内编写 JavaScrip t脚本，对于不支持 JavaScript 的浏览器，将会把编写的 JavaScript 脚本作为注释处理。</p>
<p>使用 JavaScript 脚本在页面中输出一个字符串，将 JavaScript 脚本编写在 HTML 注释中，如果浏览器支持 JavaScript 将输出此字符串，如果不支持将不输出此字符串，代码如下:</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="comment">&lt;!--</span></span></span></span><br><span class="line"><span class="comment"><span class="language-xml"><span class="language-handlebars">document.write("您的浏览器支持JavaScript脚本!");</span></span></span></span><br><span class="line"><span class="comment"><span class="language-xml"><span class="language-handlebars">//--&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>注意：</strong>注释行结尾处的两条斜杠 <strong>//</strong> 是 JavaScript 注释符号。这可以避免 JavaScript 执行 <strong>–&gt;</strong> 标签。</p>
<hr>
<h4 id="JS数据类型"><a href="#JS数据类型" class="headerlink" title="JS数据类型"></a>JS数据类型</h4><ol>
<li><p><strong>基本类型的变量是存放在栈内存（Stack）里的</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a,b;</span><br><span class="line">a = <span class="string">"zyj"</span>;</span><br><span class="line">b = a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);   <span class="comment">// zyj</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);   <span class="comment">// zyj</span></span><br><span class="line">a = <span class="string">"呵呵"</span>;       <span class="comment">// 改变 a 的值，并不影响 b 的值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);   <span class="comment">// 呵呵</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);   <span class="comment">// zyj</span></span><br></pre></td></tr></tbody></table></figure>

<p>图解如下：栈内存中包括了变量的标识符和变量的值。</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/.fun//3834493100-57c3ff4a5dac7_articlex.png" alt="img"></p>
</li>
<li><p><strong>引用类型的值是保存在堆内存（Heap）中的对象（Object)</strong></p>
<p>引用类型的值是保存在堆内存（Heap）中的对象（Object）<br>与其他编程语言不同，JavaScript 不能直接操作对象的内存空间（堆内存）。</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = {<span class="attr">name</span>:<span class="string">"percy"</span>};</span><br><span class="line"><span class="keyword">var</span> b;</span><br><span class="line">b = a;</span><br><span class="line">a.<span class="property">name</span> = <span class="string">"zyj"</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">name</span>);    <span class="comment">// zyj</span></span><br><span class="line">b.<span class="property">age</span> = <span class="number">22</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">age</span>);     <span class="comment">// 22</span></span><br><span class="line"><span class="keyword">var</span> c = {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">"zyj"</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>图解如下：</p>
<ul>
<li><p>栈内存中保存了变量标识符和指向堆内存中该对象的指针</p>
</li>
<li><p>堆内存中保存了对象的内容</p>
</li>
</ul>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/.fun//3834493100-57c3ff4a5dac7_articlex.png" alt="3834493100-57c3ff4a5dac7_articlex"></p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/.fun//3309698956-57c41a89cddc7_articlex.png" alt="3309698956-57c41a89cddc7_articlex"></p>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.blog.deityspark.fun">Deity.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.blog.deityspark.fun/2024/05/08/3Y38JTY/">https://www.blog.deityspark.fun/2024/05/08/3Y38JTY/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.blog.deityspark.fun" target="_blank">DeitySpark</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/04/24/3SMY9WK/" title="前端面经-JS（二）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">前端面经-JS（二）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/04/15/48498/" title="数据结构（三）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-04-24</div><div class="title">数据结构（三）</div></div></a></div><div><a href="/2024/04/15/8561/" title="数据结构（一）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-04-24</div><div class="title">数据结构（一）</div></div></a></div><div><a href="/2024/04/16/40594/" title="算法（一）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-04-24</div><div class="title">算法（一）</div></div></a></div><div><a href="/2024/04/23/31NKJTB/" title="前端面经-JS（一）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-04-24</div><div class="title">前端面经-JS（一）</div></div></a></div><div><a href="/2024/04/24/3SMY9WK/" title="前端面经-JS（二）"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-04-24</div><div class="title">前端面经-JS（二）</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">Deity.</div><div class="author-info__description">All my thoughts are spark of God</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/DeitySpark/"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">一、基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E6%93%8D%E4%BD%9C%E4%BA%8B%E4%BB%B6%E6%B5%81"><span class="toc-number">1.1.</span> <span class="toc-text">JS 操作事件流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">1.2.</span> <span class="toc-text">JS输入输出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">JS 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%8F%98%E9%87%8F"><span class="toc-number">1.4.</span> <span class="toc-text">JS变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.</span> <span class="toc-text">JS 数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.6.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.7.</span> <span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.8.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-typeof-null-%E5%92%8C-undefined"><span class="toc-number">1.9.</span> <span class="toc-text">JavaScript typeof, null, 和 undefined</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.10.</span> <span class="toc-text">类型转换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%BF%9B%E9%98%B6"><span class="toc-number">2.</span> <span class="toc-text">二、进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">==正则表达式==</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E9%94%99%E8%AF%AF"><span class="toc-number">2.2.</span> <span class="toc-text">JS错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E8%B0%83%E8%AF%95"><span class="toc-number">2.3.</span> <span class="toc-text">JS调试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E5%A3%B0%E6%98%8E%E6%8F%90%E5%8D%87"><span class="toc-number">2.4.</span> <span class="toc-text">JS 声明提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.</span> <span class="toc-text">JS严格模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B%E6%95%B0%E6%8D%AE%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">2.6.</span> <span class="toc-text">浮点型数据使用注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81API"><span class="toc-number">2.7.</span> <span class="toc-text">JS 表单验证API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#this%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">2.8.</span> <span class="toc-text">this关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSON"><span class="toc-number">2.9.</span> <span class="toc-text">JSON</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">2.10.</span> <span class="toc-text">JS异步编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise"><span class="toc-number">2.11.</span> <span class="toc-text">Promise</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89"><span class="toc-number">2.12.</span> <span class="toc-text">JS函数定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">2.13.</span> <span class="toc-text">JS函数参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="toc-number">2.14.</span> <span class="toc-text">JS函数调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E9%97%AD%E5%8C%85"><span class="toc-number">2.15.</span> <span class="toc-text">==JS闭包==</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E7%B1%BB"><span class="toc-number">2.16.</span> <span class="toc-text">JS类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%AB%98%E9%98%B6"><span class="toc-number">3.</span> <span class="toc-text">三、高阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-I-O"><span class="toc-number">3.1.</span> <span class="toc-text">JS I/O</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS-%E6%B3%A8%E9%87%8A"><span class="toc-number">3.2.</span> <span class="toc-text">JS 注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.3.</span> <span class="toc-text">JS数据类型</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/08/3Y38JTY/" title="JS基础补充"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS基础补充"></a><div class="content"><a class="title" href="/2024/05/08/3Y38JTY/" title="JS基础补充">JS基础补充</a><time datetime="2024-05-07T16:00:00.000Z" title="发表于 2024-05-08 00:00:00">2024-05-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/24/3SMY9WK/" title="前端面经-JS（二）"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picsum.photos/330/235" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端面经-JS（二）"></a><div class="content"><a class="title" href="/2024/04/24/3SMY9WK/" title="前端面经-JS（二）">前端面经-JS（二）</a><time datetime="2024-04-23T16:00:00.000Z" title="发表于 2024-04-24 00:00:00">2024-04-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2020 - 2024 By Deity.</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><img class="icp-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/icp.png"><span>备案号：陇ICP备2023002295号-1</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div></div></div><script src="/bundle.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit);
(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})();
(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://deityspark-twikoo.hf.space',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://deityspark-twikoo.hf.space',
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})();
POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
;
let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></body></html>